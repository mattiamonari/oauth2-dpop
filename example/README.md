# oauth2-dpop example

## Usage

Start a server: `node index.js`

Issue new token using following request:

```bash
curl -X POST -H "DPoP: eyJ0eXAiOiJkcG9wK2p3dCIsImFsZyI6IkVTMjU2IiwiandrIjp7Imt0eSI6IkVDIiwia2lkIjoiQmMwYXk0d2RzdExuOWp4amR2eXpyX3V0VUJQZTJGbVhRVFdLaXhGUWFzZyIsImNydiI6IlAtMjU2IiwieCI6IjI3Q3lPVkpkaE1UcmVEenV1Vkh6bDZieXJlYXVKeFhnRFpBVDItanozVjQiLCJ5IjoiUUVvd1ZWb1Bod1hENlgxUi04ZU5kWVk3dGNleXpidWw2NGJxcmhNTEUzayJ9fQ.eyJqdGkiOiItQndDM0VTYzZhY2MybFRjIiwiaHRtIjoiUE9TVCIsImh0dSI6Imh0dHA6Ly9sb2NhbGhvc3Q6ODA4MC9sb2dpbiIsImlhdCI6MTY2MDIzMzQ3NH0.2YUHn_5HwzXCniJOdfiKO5EkoUfbAmOgqdxLHofz3qgjEIjc394UxyGa5YZV0NFk9Fvt4Tdq8XectHwJa-cKAQ" -H "Content-Type: application/json" --data '{"username":"test","password":"test"}' http://localhost:8080/login
```

Access protected resource using command below:

```bash
curl -H "Authorization: DPoP eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJjbmYiOnsiamt0IjoiQmMwYXk0d2RzdExuOWp4amR2eXpyX3V0VUJQZTJGbVhRVFdLaXhGUWFzZyJ9LCJpYXQiOjE2NjAyMzI1NjJ9.fAKdxI_MtI6XGgo7OEcecqz11MeHh-jvJyVVOZGQbDM" -H "DPoP: eyJ0eXAiOiJkcG9wK2p3dCIsImFsZyI6IkVTMjU2IiwiandrIjp7Imt0eSI6IkVDIiwia2lkIjoiQmMwYXk0d2RzdExuOWp4amR2eXpyX3V0VUJQZTJGbVhRVFdLaXhGUWFzZyIsImNydiI6IlAtMjU2IiwieCI6IjI3Q3lPVkpkaE1UcmVEenV1Vkh6bDZieXJlYXVKeFhnRFpBVDItanozVjQiLCJ5IjoiUUVvd1ZWb1Bod1hENlgxUi04ZU5kWVk3dGNleXpidWw2NGJxcmhNTEUzayJ9fQ.eyJqdGkiOiItQndDM0VTYzZhY2MybFRjIiwiaHRtIjoiR0VUIiwiaHR1IjoiaHR0cDovL2xvY2FsaG9zdDo4MDgwL3Byb3RlY3RlZC1yZXNvdXJjZSIsImlhdCI6MTY2MDIzMzQ3NH0.pvUPpvRPFc-SeBchg-D1ihbrccfM_YLLyH0eYIa1CX19ozFp4sbSkL7nm9bLWuMD53Yhcoiweg2JOiIpuGEsng" http://localhost:8080/protected-resource
```
